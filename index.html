<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    *{
        padding: 0;
        margin: 0;
        box-sizing: border-box;
    }
    .firstdiv{
        background-image: url(destructive_car_race-1920x1200.jpg);
        height: 100vh;
        width: 100%;
        background-size: cover;
        display: flex;
        flex-direction: column;
        /* justify-content: center; */
        align-items: center;
        background-color: rgba(0, 0, 0, 0.116);
        background-blend-mode:darken;
        
    }
    .seconddiv{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        /* background-color: rgba(0, 255, 255, 0.61); */
        height: 300px;
        width: 500px;
        background: linear-gradient(rgba(255, 0, 0, 0.582), rgba(255, 255, 0, 0.527));
        background-blend-mode: lighten;
        margin-top: 40px;
    }
    #input{
        text-align: center;
        font-weight: 700;
    }
    h1{
        font-size: 30px;
        font-weight: 900;
        color: chartreuse;
        
    }
    p{
        font-weight: 800;
        font-size: 17px;
    }
    #provider,#amount{
        background-color: black;
        color: wheat;
        font-weight: 700;
        /* text-align: center; */
    }
    #btn{
        background-color: black;
        color: wheat;
        font-weight: 700;
        border: none;
        height: 20px;
        width: 100px;
        outline: palevioletred solid 1px;

    }
    #btn2{
        background-color: black;
        color: wheat;
        font-weight: 700;
        border: none;
        height: 20px;
        width: 90px;
        outline: palevioletred solid 1px;

    }
    #previewdiv {
        color: black;
        background-color: white;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 500px;
        justify-content: center;
        align-items: center;
        
    }
    #preview1{
        display: flex;
        text-align: center;
        gap: 40px;
    }

    #preview p{
        display: flex;
        gap: 100px;
        background-color: white;
        align-items: center;

    }
    #balance{
        font-size: 15px;
        font-weight: 800;
        
    }
    #innerdiv{
        color: black;
        display: flex;
        width: 500px;
        text-align: center;
        justify-content: center;
        align-items: center;
        word-spacing: 45px;
    }
    #amountt{
        margin-right: 40px;
    }
    table, thead, tbody, th, td, tr{
        border-collapse: collapse;
        padding: 10px;
        border: solid 2px greenyellow;
        color: black;
        background-color: wheat;
        text-align: center;
        
        

    }
    th, td{
        width: 150px;
        
    }
    td:nth-child(even) {
        background-color: brown;
    }
    
    

    @media (max-width:510px) {
        .seconddiv{  
            width: 400px;
            
        }
        .firstdiv{
            width: 100%;
        }

       
       
    }
    @media (max-width:433px) {
        #preview p{  
            font-size: 12px;
        }
        
       
       
    }
    @media (max-width:405px) {
        #preview p{  
            font-size: 10px;
        }
        .seconddiv{  
            width: 350px;
            
        }
         p{
            font-size: 9px;
            text-align: center;
            
        }

        
       
       
    }

</style>

<body>

    <div class="firstdiv">
        <div class="seconddiv">
            <h1>RECHARGE CARD</h1>
            <br>
            <div class="thirddiv">
                <select name="" id="provider">
                    <option value=""> Choose Provider</option>
                    <option value="MTN"> MTN</option>
                    <option value="GLO"> GLO</option>
                    <option value="AIRTEL"> AIRTEL</option>
                    <option value="9MOBILE"> 9MOBILE</option>
                </select>
            
            
                <select name="" id="amount">
                    <option value=""> Choose Amount</option>
                    <option value="100"> 100</option>
                    <option value="200"> 200</option>
                    <option value="500"> 500</option>
                    <option value="1000"> 1000</option>
                </select>
            </div>
        
            <br>
            <br>
        
            <button id="btn" onclick="generatePin()">Generate Pin</button>
            <br>
            <p id="mypin"> </p>
        
            <br>
            <br>
        
            <input id="input" type="text" value="*311*pin#" >
            <br>
            <button id="btn2" onclick="loadCard()"> Load card</button>
            <br>
            <div id="balance"></div>
        </div>
        <table id="tablee">
            <thead>
                <th>s/n </th>
                <th>provider</th>
                <th>amount</th>
                <th>pin</th>
                <th>validity</th>

            </thead>
            <tbody id="tbody">
                
            </tbody>
        </table>
        
    </div>

    


</body>

</html>
<script>
        let history = []
        let totalamount = { MTN: 0, AIRTEL: 0, GLO:0, '9MOBILE' : 0 }
        // let  rechargeCode 
        
        // balance.innerHTML = `Balance`
        
        
       
       
       
    //     let providers = provider.value 
    //    let amounts = amount.value
    
       
        
      
    function generatePin() {

        
        
       if (provider.value === '' || amount.value === '') {
        alert('Select Network and Amount')
        mypin.innerHTML = ''
        
       }else{
       let rechargeCode = Math.floor(Math.random() * 90000000000000) + 10000000000000
       let rechargeCodes = {provide: provider.value, amount: amount.value, rechargeCode: rechargeCode, used: false} 
        history.push(rechargeCodes)
        mypin.innerHTML = `Network: ${provider.value} Amount: ${amount.value} Pin: ${rechargeCode}`

        display()

       }
  
        
    }

    function display() {
        tbody.innerHTML = ""
        history.forEach((card, i ,arr)=>{
            tbody.innerHTML += `<tr>
                    <td>${i+1}</td>
                    <td>${card.provide}</td>
                    <td>${card.amount}</td>
                    <td>${card.rechargeCode}</td>
                    <td>${card.used}</td>
                </tr>`


        })
        
    }
    function loadCard() {

        let foundcard = history.find((card) => { return card.rechargeCode == input.value.trim().slice(5, 19)})

            // console.log(input.value.trim().slice(5, 19));
            
        if(input.value.trim()=== ''){
            alert('input a valid code')
        }else if(foundcard === undefined){
            alert('does not exist')
        }else if(input.value !== `*311*${foundcard.rechargeCode}#`){
            alert('please enter a valid format')
        }else if(foundcard.used === true){
            alert('card has been used')
            input.value = `*311*pin#`
            
        }
        else{
            foundcard.used =  true
            alert(`${foundcard.amount} ${foundcard.provide} recharge card loaded successfully`)
            display()
            input.value = `*311*pin#`
            provider.value = ''
            amount.value = ''
            mypin.innerHTML = ''
                
            totalamount [foundcard.provide] += parseInt(foundcard.amount)
            balance.innerHTML = `${foundcard.provide} BALANCE = ${totalamount [foundcard.provide]}`
        }
    }    
        



    
   


    
    
    
    
    
    
       
    

</script>